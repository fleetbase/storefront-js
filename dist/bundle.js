!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["@fleetbase/storefront"]={},t.axios)}(this,(function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=r(e);const{isArray:i}=Array,a=6e4,s=(t,e,r,n=[])=>{if(i(t))if(n.length<=a)t.splice(e,r,...n);else{t.splice(e,r);for(let r=0;r<n.length;r+=a){let i=n.slice(r,r+a);t.splice(e+r,0,...i)}}else c(arr)&&t.replace(e,r,n)},o=t=>t,u=(t,e=o)=>{let r=[],n=new Set,i="function"==typeof e?e:t=>get(t,e);return t.forEach((t=>{let e=i(t);n.has(e)||(n.add(e),r.push(t))})),r},c=t=>t instanceof y,h=(t,e)=>i(t)?t[e]:c(t)?t.objectAt(e):null,d=(t,e)=>2===arguments.length?r=>e===r[t]:e=>Boolean(e[t]),l=(t,e,r=0)=>{let n=t.length;for(let i=r;i<n;i++){if(e(h(t,i),i,t))return i}return-1},f=(t,e,r)=>{let n=e.bind(r),i=l(t,n,0);return-1===i?void 0:h(t,i)},g=(t,e,r)=>{let n=e.bind(r);return-1!==l(t,n,0)},p=(t,e,r)=>{let n=e.bind(r);return-1===l(t,((t,e,r)=>!n(t,e,r)),0)},m=(t,e,r=0,n)=>{let i=t.length;return r<0&&(r+=i),l(t,n&&e!=e?t=>t!=t:t=>t===e,r)},w=(t,e,r=1)=>(s(t,e,r,[]),t),b=(t,e,r)=>(s(t,e,0,[r]),r);class y extends Array{constructor(...t){i(arguments[0])?super(...arguments[0]):super(...arguments)}get notEmpty(){return this.length>0}get empty(){return 0===this.length}get first(){return h(this,0)}get last(){return h(this,this.length-1)}replace(t,e,r=[]){return s(this,t,e,r),this}objectsAt(t){return t.map((t=>h(this,t)))}objectAt(t){return h(this,t)}indexOf(t,e){return m(this,t,e,!1)}lastIndexOf(t,e){let r=this.length;(void 0===e||e>=r)&&(e=r-1),e<0&&(e+=r);for(let r=e;r>=0;r--)if(h(this,r)===t)return r;return-1}includes(t,e){return-1!==m(this,t,e,!0)}findBy(){return f(this,d(...arguments))}findIndexBy(){return l(this,d(...arguments))}isEvery(){return p(this,d(...arguments))}isAny(){return g(this,d(...arguments))}invoke(t,...e){let r=[];return this.forEach((n=>r.push(n[t]?.(...e)))),r}toArray(){return this.map((t=>t))}compact(){return this.filter((t=>null!=t))}sortBy(){let t=arguments;return this.sort(((e,r)=>{for(let n=0;n<t.length;n++){let i=t[n],a=e[i],s=r[i],o=compare(a,s);if(o)return o}return 0}))}uniqBy(t){return u(this,t)}without(t){if(!this.includes(t))return this;let e=t==t?e=>e!==t:t=>t==t;return this.filter(e)}clear(){let t=this.length;return 0===t||this.replace(0,t,[]),this}insertAt(t,e){return b(this,t,e),this}replaceAt(t,e){return this.replace(t,1,[e])}removeAt(t,e){return w(this,t,e)}pushObject(t){return this.insertAt(this.length,t)}pushObjects(t){return this.replace(this.length,0,t),this}popObject(){let t=this.length;if(0===t)return null;let e=h(this,t-1);return this.removeAt(t-1,1),e}shiftObject(){if(0===this.length)return null;let t=h(this,0);return this.removeAt(0),t}unshiftObject(t){return b(this,0,t)}unshiftObjects(t){return this.replace(0,0,t),this}reverseObjects(){let t=this.length;if(0===t)return this;let e=this.toArray().reverse();return this.replace(0,t,e),this}setObjects(t){if(0===t.length)return this.clear();let e=this.length;return this.replace(0,e,t),this}removeObject(t){let e=this.length||0;for(;--e>=0;){h(this,e)===t&&this.removeAt(e)}return this}removeObjects(t){for(let e=t.length-1;e>=0;e--)this.removeObject(t[e]);return this}addObject(t){return this.includes(t)||this.pushObject(t),this}addObjects(t){return t.forEach((t=>this.addObject(t))),this}}const v=t=>{const e=null==t;if(e)return e;if("number"==typeof t.size)return!t.size;const r=typeof t;if("object"===r){const{size:e}=t;if("number"==typeof e)return!e}if("number"==typeof t.length&&"function"!==r)return!t.length;if("object"===r){const{length:e}=t;if("number"==typeof e)return!e}return!1},x=t=>v(t)||"string"==typeof t&&!1===/\S/.test(t);function T(t){return t instanceof S}const C=()=>!("undefined"==typeof process||"object"!=typeof process?.env&&-1===process.release?.name?.search(/node|io.js/)||"undefined"!=typeof window&&"ReactNative"!==window?.navigator?.product),k=(t={})=>C()?_("adapter","NodeAdapter",t):_("adapter","BrowserAdapter",t);class D{constructor(t=0,e=0){this.type="Point",this.coordinates=[e,t]}get latitude(){return this.coordinates[1]}get longitude(){return this.coordinates[0]}lat(){return this.latitude}lng(){return this.longitude}static fromGeoJson(t){return[longitude,latitude]=t.coordinates,new D(latitude,longitude)}serialize(){return{type:"Point",coorindates:[this.lat(),this.lng()]}}toJson(){return this.serialize()}toString(){return`(${this.latitude}, ${this.longitude})`}}const A=t=>"object"==typeof t&&!v(t?.attributes)&&"object"==typeof t?.attributes,E=(t,e)=>{const r=t();return Array.isArray(r)||"object"==typeof r?$(r,e):null},$=(t,e)=>{let r=t;const n=typeof t,i="object"===n,a="function"===n,s=Array.isArray(t),o="string"===typeof e&&e.includes(".")?e.split("."):[e];if(s||i){for(let t=0;t<o.length;t++){if(void 0===r[o[t]])return null;if(r=r[o[t]],A(r)&&void 0!==o[t+1]){const e=o.slice(t+1).join(".");return $(r.attributes,e)}if("function"==typeof r){const e=o.slice(t+1).join(".");return E(r,e)}}return r}if(a)return E(t,e)},M=(t,e,r)=>{let n=t;const i="object"===typeof t,a=Array.isArray(t),s="string"===typeof e&&e.includes(".")?e.split("."):[e],o=s.length;if(a||i){for(let t=0;t<o-1;t++)n[s[t]]||(n[s[t]]={}),n=n[s[t]];n[s[o-1]]=r}return r};class U{constructor(t={},e=null){this.actions=t,this.bind=e}extend(t=null){const e=t||this.bind;if(!e)return this;if(this?.actions&&"object"==typeof this.actions)for(let t in this.actions){const r=this.actions[t];"function"==typeof r?M(e,t,r.bind(e)):M(e,t,r)}return this}}class S{constructor(t={},e,r,n={}){this.attributes=t,this.dirtyAttributes={},this.changes={},this.isLoading=!1,this.isSaving=!1,this.isDestroying=!1,this.isReloading=!1,this.resource=r,this.options=n,this.version=n.version||"v1",this.setAdapter(e)}setAdapter(t){return this.adapter=t,this.store=new Z(this.resource,t,{onAfterFetch:this.syncAttributes.bind(this),actions:this.options?.actions}),this}get id(){return this.getAttribute("id")}create(t={}){const e=this.mergeAttributes(t);return this.setFlags(["isLoading","isSaving"]),this.store.create(e).then((t=>(this.setFlags(["isLoading","isSaving"],!1),t)))}update(t={}){return this.setFlags(["isLoading","isSaving"]),this.store.update(this.attributes.id,t).then((t=>(this.setFlags(["isLoading","isSaving"],!1),t)))}destroy(){return this.setFlags(["isLoading","isDestroying"]),this.store.destroy(this.attributes.id).then((t=>(this.setFlags(["isLoading","isDestroying"],!1),t)))}reload(){return this.setFlags(["isLoading","isReloading"]),this.store.findRecord(this.attributes.id).then((t=>(this.reset(),t)))}setFlags(t=[],e=!0){const r=["isLoading","isSaving","isReloading","isDestroying"];for(let n=0;n<t.length;n++){const i=t[n];if("string"!=typeof i||!r.includes(i))throw new Error(`${i} is not a valid flag!`);this[i]=e}return this}reset(){return this.dirtyAttributes={},this.changes={},this.isLoading=!1,this.isSaving=!1,this.isReloading=!1,this}empty(){return this.reset(),this.attribues={},this}save(t={}){const e=this.getAttributes();return v(this.id)?this.create(e):!0===t.onlyDirty?this.savedirty():this.update(e)}saveDirty(){const t=Object.keys(this.dirtyAttributes),e={};for(let r=0;r<t.length;r++){const n=t[r];e[n]=this.getAttribute(n)}return this.update(e)}get createdAt(){return this.hasAttribute("created_at")?new Date(this.getAttribute("created_at")):null}get updatedAt(){return this.hasAttribute("updated_at")?new Date(this.getAttribute("updated_at")):null}get isLoaded(){return this.hasAttributes(["created_at","id"])}get isEmpty(){return 0===Object.values(this.attributes).length}get isNew(){return!this.id}get isSaved(){return!this.isNew&&this.isLoaded}get isDeleted(){return this.hasAttributes(["deleted","time"])}eachAttribute(t){return"function"!=typeof t||Object.keys(this.attributes).forEach((e=>{const r=this.getAttribute(e);t.call(this,r,e)})),this}changes(){return this.changes}getDirtyAttributes(){return this.dirtyAttributes}isDirty(t){return t in this.dirtyAttributes}hasDirtyAttributes(){return Object.keys(this.dirtyAttributes).length>0}mutate(t,e){this.attributes[t]=e}setAttribute(t,e=null){if(null===e&&"object"==typeof t)return this.setAttributes(t);const r=this.attributes[t]||null;return M(this.attributes,t,e),M(this.dirtyAttributes,t,r),i(this.changes[t])||(this.changes[t]=[]),this.changes[t].push({property:t,previousValue:r,value:e,changedAt:new Date}),this}setAttributes(t={}){for(let e in t)this.setAttribute(e,t[e]);return this}getAttribute(t,e=null){return $(this.attributes,t)||e}hasAttribute(t){if(i(t)){const e=Object.keys(this.attributes||{});return t.every((t=>e.includes(t)))}return!!this.attributes&&t in this.attributes}hasAttributes(t=[]){return this.hasAttribute(t)}isAttributeFilled(t){return i(t)?this.hasAttribute(t)&&t.every((t=>!v(this.getAttribute(t)))):this.hasAttribute(t)&&!v(this.getAttribute(t))}getAttributes(t){const e={};if(null==t)return this.attributes;if("string"==typeof t)return this.getAttribute([...arguments]);if(!i(t))throw new Error("No attribute properties provided!");for(let r=0;r<t.length;r++){const n=t[r];"string"==typeof n&&(e[n]=this.getAttribute(n))}return e}serialize(){return this.getAttributes()}mergeAttributes(t={}){const e=this.attributes||{};return this.attributes={...e,...t},this.attributes}syncAttributes(t={}){this.attributes=t}}const P=new U({getDistanceAndTime:function(t,e={}){return this.adapter.get(`${this.namespace}/${t}/distance-and-time`,{},e)}});class R extends S{constructor(t={},e,r={}){super(t,e,"order",{actions:P,...r})}getDistanceAndTime(){return this.store.getDistanceAndTime(this.id)}}class O extends S{constructor(t={},e,r={}){super(t,e,"payload",r)}attach(t){}get entities(){}get dropoff(){}get pickup(){}get waypoints(){return new y(this.waypoints)}}class q extends S{constructor(t={},e,r={}){super(t,e,"place",r)}static fromGoogleAddress(t,e,r={}){const[n,i]=t.getAttribute("coordinates"),a={name:null,address:t.getAttribute("address"),location:new D(n,i),street1:t.getAttribute("streetName"),street2:null,city:t.getAttribute("city"),province:t.getAttribute("stateLong"),postal_code:t.getAttribute("postalCode"),neighborhood:t.get("neighborhood"),district:t.getAttribute("county"),building:t.get("building"),country:t.getAttribute("countryShort"),phone:null,security_access_code:null};return new q(a,e,r)}get latitude(){return this.getAttribute("location",new D).coordinates[1]}get longitude(){return this.getAttribute("location",new D).coordinates[0]}get coordinates(){const{latitude:t,longitude:e}=this;return[t,e]}setOwner(t){return T(t)&&this.setAttribute("owner",t.id),"string"==typeof t&&this.setAttribute("owner",t),this}}class N extends S{constructor(t={},e,r={}){super(t,e,"contact",r)}}class Y extends S{constructor(t={},e,r={}){super(t,e,"service-quote",r)}fromPreliminary(){}fromPayload(){}}class L{constructor(t={}){this.version=t.version||"v1",this.host=t.host||null,this.namespace=t.namespace||null,this.headers=t.headers||{}}}class j extends L{constructor(t){super(t),this.setHeaders({Authorization:`Bearer ${t.publicKey}`,"Content-Type":"application/json","User-Agent":"@fleetbase/sdk;browser"})}setHeaders(t={}){return this.headers={...this.headers,...t},this}parseJSON(t){return new Promise(((e,r)=>t.json().then((r=>e({statusText:t.statusText,status:t.status,ok:t.ok,json:r}))).catch((()=>{r(new Error("Oops! Something went wrong when handling your request."))}))))}request(t,e="GET",r={},n={}){return new Promise(((i,a)=>fetch(n.url||`${this.host}/${this.namespace}/${t}`,{method:e,mode:n.mode||"cors",headers:new Headers({...this.headers||{},...n.headers||{}}),...r}).then(this.parseJSON).then((t=>t.ok?i(t.json):a(new Error(t.json.errors?t.json.errors[0]:t.statusText)))).catch((t=>{a(t)}))))}get(t,e={},r={}){const n=x(e)?"":new URLSearchParams(e).toString();return this.request(`${t}${n?`?${n}`:""}`,"GET",{},r)}post(t,e={},r={}){return this.request(t,"POST",{body:JSON.stringify(e)},r)}put(t,e={},r={}){return this.request(t,"PUT",{body:JSON.stringify(e)},r)}delete(t,e={}){return this.request(t,"DELETE",{},e)}patch(t,e={},r={}){return this.request(t,"PATCH",{body:JSON.stringify(e)},r)}}class H extends L{constructor(t){super(t),this.axios=n.default.create({baseURL:`${this.host}/${this.namespace}`,headers:{Authorization:`Bearer ${t.publicKey}`,"Content-Type":"application/json","User-Agent":"@fleetbase/sdk;node"}})}setHeaders(t={}){const e=this.axios.defaults.headers.common;return this.axios.defaults.headers.common={...e,...t},this}transform(t){return t.data}get(t,e={},r={}){const n=x(e)?"":new URLSearchParams(e).toString();return this.axios.get(`${t}${n?`?${n}`:""}`,r).then(this.transform.bind(this))}post(t,e={},r={}){return this.axios.post(t,e,r).then(this.transform.bind(this))}put(t,e={},r={}){return this.axios.put(t,e,r).then(this.transform.bind(this))}delete(t,e={}){return this.axios.delete(t,e).then(this.transform.bind(this))}patch(t,e={},r={}){return this.axios.patch(t,e,r).then(this.transform.bind(this))}}class F extends L{}class W{constructor(t,e=!0){this.str=t,this.chain=e}uncountableWords=["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"];pluralRules=[[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]];singularRules=[[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("s$","gi"),""]];nonTitlecasedWords=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"];idSuffix=new RegExp("(_ids|_id)$","g");underbar=new RegExp("_","g");spaceOrUnderbar=new RegExp("[ _]","g");uppercase=new RegExp("([A-Z])","g");underbarPrefix=new RegExp("^_");get(){return this.str}applyRules(t,e,r,n){if(n)t=n;else if(!(r.indexOf(t.toLowerCase())>-1))for(var i=0;i<e.length;i++)if(t.match(e[i][0])){t=t.replace(e[i][0],e[i][1]);break}return this.str=t,!0===this.chain?this:t}pluralize(t,e=null){return t=t||this.str,this.applyRules(t,this.pluralRules,this.uncountableWords,e)}singularize(t,e){return t=t||this.str,this.applyRules(t,this.singularRules,this.uncountableWords,e)}camelize(t,e){let r=(t=t||this.str).split("/");for(var n=0;n<r.length;n++){let t=r[n].split("_");for(let i=e&&n+1===r.length?1:0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].substring(1);r[n]=t.join("")}if(t=r.join("::"),!0===e){let e=t.charAt(0).toLowerCase(),r=t.slice(1);t=e+r}return this.str=t,!0===this.chain?this:t}underscore(t){for(var e=(t=t||this.str).split("::"),r=0;r<e.length;r++)e[r]=e[r].replace(this.uppercase,"_$1"),e[r]=e[r].replace(this.underbarPrefix,"");return t=e.join("/").toLowerCase(),this.str=t,!0===this.chain?this:t}humanize(t,e){return t=(t=(t=(t=t||this.str).toLowerCase()).replace(this.idSuffix,"")).replace(this.underbar," "),e||(t=this.capitalize(t)),this.str=t,!0===this.chain?this:t}capitalize(t){return t=(t=(t=t||this.str).toLowerCase()).substring(0,1).toUpperCase()+t.substring(1),this.str=t,!0===this.chain?this:t}dasherize(t){return t=(t=(t=t||this.str).replace(this.spaceOrUnderbar,"-")).toLowerCase(),this.str=t,!0===this.chain?this:t}normify(t,e){t=t||this.str,!0===e?(t=this.camelize(t),t=this.underscore(t)):t=t.toLowerCase();for(var r=(t=t.replace(this.underbar," ")).split(" "),n=0;n<r.length;n++){for(var i=r[n].split("-"),a=0;a<i.length;a++)this.nonTitlecasedWords.indexOf(i[a].toLowerCase())<0&&(i[a]=this.capitalize(i[a]));r[n]=i.join("-")}return t=(t=r.join(" ")).substring(0,1).toUpperCase()+t.substring(1),this.str=t,!0===this.chain?this:t}demodulize(t){var e=(t=t||this.str).split("::");return t=e[e.length-1],this.str=t,!0===this.chain?this:t}tableize(t){return t=t||this.str,t=this.pluralize(this.underscore(t)),this.str=t,!0===this.chain?this:t}classify(t){return t=t||this.str,t=this.singularize(this.camelize(t)),this.str=t,!0===this.chain?this:t}foreignKey(t,e=!1){return t=t||this.str,t=this.underscore(this.demodulize(t))+(e?"":"_")+"id",this.str=t,!0===this.chain?this:t}ordinalize(t){for(var e=(t=t||this.str).split(" "),r=0;r<e.length;r++){if(NaN===parseInt(e[r])){var n=e[r].substring(e[r].length-2),i=e[r].substring(e[r].length-1),a="th";"11"!=n&&"12"!=n&&"13"!=n&&("1"===i?a="st":"2"===i?a="nd":"3"===i&&(a="rd")),e[r]+=a}}return t=e.join(" "),this.str=t,!0===this.chain?this:t}static invoke(){const t=Object.values(arguments),e=new W(null,!1),r=arguments[0];return t.shift(),"function"==typeof e[r]?e[r](...t):null}}const z=function(){const t=["pluralize",...arguments];return W.invoke(...t)},Q=function(){const t=["singularize",...arguments];return W.invoke(...t)},B=function(){const t=["classify",...arguments];return W.invoke(...t)},I={Place:q,Payload:O,Order:R},G={BrowserAdapter:j,NodeAdapter:H,EmberJsAdapter:F};class X{constructor(){return this.resources=I,this.adapters=G,this.lookup(...arguments)}lookup(t,e){const r=z(t),n=[...arguments].slice(2);if(!this[r])throw new Error("Attempted to resolve invalid type");if(!this[r][e])throw new Error(`No ${Q(t)} named ${e} to resolve`);return new this[r][e](...n)}}const _=function(){return new X(...arguments)},J=(t,e=[])=>{if(t.actions=i(e)?e:[e],!i(e))return e instanceof U&&e.extend(t),t;for(let t=0;t<e.length;t++){const r=e[t];(void 0).extendActions(r)}},K=(t,e)=>{if("function"==typeof t.options.onAfterFetch&&t.options.onAfterFetch(e),i(e)){const r=[];for(let n=0;n<e.length;n++)r.push(t.afterFetch(e[n]));return new y(...r)}const r=t.serialize(e);return t.deposit(r)};class Z{constructor(t,e,r={}){this.resource=t,this.adapter=e||k(),this.namespace=z(t),this.storage=new y,this.options=r,this.extendActions(r.actions)}extendActions(t=[]){return J(this,t)}deposit(t){return t}serialize(t){return _("resource",B(this.resource),t,this.adapter)}afterFetch(t){return K(this,t)}create(t={},e={}){return new Promise((async(r,n)=>{r(await this.adapter.post(`${this.namespace}`,t,e).then(this.afterFetch.bind(this)).catch(n))}))}update(t,e={},r={}){return new Promise((async(n,i)=>{n(await this.adapter.put(`${this.namespace}/${t}`,e,r).then(this.afterFetch.bind(this)).catch(i))}))}findRecord(t,e={}){return new Promise((async(r,n)=>{r(await this.adapter.get(`${this.namespace}/${t}`,{},e).then(this.afterFetch.bind(this)).catch(n))}))}findAll(t={}){return new Promise((async(e,r)=>{e(await this.adapter.get(`${this.namespace}`,{},t).then(this.afterFetch.bind(this)).catch(r))}))}query(t={},e={}){return new Promise((async(r,n)=>{r(await this.adapter.get(`${this.namespace}`,t,e).then(this.afterFetch.bind(this)).catch(n))}))}queryRecord(t={},e={}){return t.single=!0,new Promise((async(r,n)=>{r(await this.adapter.get(`${this.namespace}`,t,e).then(this.afterFetch.bind(this)).catch(n))}))}destroy(t,e={}){const r=T(t)?t.getAttribute("id"):t;return new Promise((async(t,n)=>{t(await this.adapter.delete(`${this.namespace}/${r}`,{},e).then(this.afterFetch.bind(this)).catch(n))}))}}class V extends S{setAdapter(t){return this.adapter=t,this.store=new xr(this.resource,t,{onAfterFetch:this.syncAttributes.bind(this),actions:this.options?.actions}),this}}const tt=(t={})=>C()?vr("adapter","NodeAdapter",t):vr("adapter","BrowserAdapter",t),et=(t="")=>/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g.test(t);function rt(t=0,e="USD",r="symbol"){return new Intl.NumberFormat("en-US",{style:"currency",currency:e,currencyDisplay:r}).format(t)}class nt extends V{constructor(t={},e,r={}){super(t,e,"product",r)}variants(){return this.getAttribute("variants")}addons(){return this.getAttribute("addon_categories")}get isOnSale(){return this.getAttribute("is_on_sale")}get isNotOnSale(){return!this.getAttribute("is_on_sale")}get formattedAmount(){const{price:t,sale_price:e,currency:r}=this.getAttributes(["price","sale_price","currency"]);return this.isOnSale?rt(e/100,r):rt(t/100,r)}}class it extends V{constructor(t={},e,r={}){super(t,e,"category",r)}}const at=new U({login:function(t,e=null,r={}){if(et(t))return this.adapter.post("customers/login-with-sms",{phone:t});if(!e)throw new Error("Login requires password!");return this.adapter.post("customers/login",{identity:t,password:e,...r}).then(this.afterFetch.bind(this))},verifySmsCode:function(t,e,r={}){return this.adapter.post("customers/verify-sms",{phone:t,code:e,...r}).then(this.afterFetch.bind(this))},retrieve:function(t){return this.findRecord(t)}});class st extends N{constructor(t={},e,r={}){super(t,e,"customer",{actions:at,...r})}setAdapter(t){return this.adapter=t,this.store=new xr(this.resource,t,{onAfterFetch:this.syncAttributes.bind(this),actions:this.options?.actions}),this}get token(){return this.getAttribute("token")}syncDevice(t){return this.adapter.setHeaders({"Customer-Token":this.token}).post("customers/register-device",t).then((()=>this))}getSavedPlaces(){return this.adapter.setHeaders({"Customer-Token":this.token}).get("customers/places").then((t=>new y(t.map((t=>new q(t,this.adapter))))))}getOrderHistory(t={}){return this.adapter.setHeaders({"Customer-Token":this.token}).get("customers/orders",t).then((t=>new y(t.map((t=>new R(t,this.adapter))))))}}const ot=new U({create:void 0,findAll:void 0,query:void 0,queryRecord:void 0,add:function(t,e,r=1,n={},i={}){return this.adapter.post(`${this.namespace}/${t}/${e}`,{...n,quantity:r},i).then(this.afterFetch.bind(this))},update:function(t,e,r,n={},i={}){return this.adapter.put(`${this.namespace}/${t}/${e}`,{...n,quantity:r},i).then(this.afterFetch.bind(this))},remove:function(t,e,r={}){return this.adapter.delete(`${this.namespace}/${t}/${e}`,{},r).then(this.afterFetch.bind(this))},empty:function(t,e={}){return this.adapter.put(`${this.namespace}/${t}/empty`,{},e).then(this.afterFetch.bind(this))},retrieve:function(t=""){return this.findRecord(t)}});class ut extends V{constructor(t={},e,r={}){super(t,e,"cart",{actions:ot,...r})}add(t,e=1,r={},n={}){return t instanceof nt&&(t=t.id),this.store.add(this.id,t,e,r,n)}update(t,e,r={},n={}){return this.store.update(this.id,t,e,r,n)}remove(t,e={}){return this.store.remove(this.id,t,e)}empty(t={}){return this.store.empty(this.id,t)}delete(){return this.destroy()}refresh(){return this.store.retrieve(this.id)}subtotal(){let t=0;return this.contents().forEach((e=>{t+=e.subtotal})),t}contents(){return this.getAttribute("items",[])}hasProduct(t){return-1!==this.contents().findIndex((e=>e.product_id===t))}get isEmpty(){return 0===this.contents().length}get isNotEmpty(){return!this.isEmpty}}function ct(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function ht(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function dt(t){ht(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function lt(t,e){ht(2,arguments);var r=dt(t).getTime(),n=ct(e);return new Date(r+n)}function ft(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function gt(t){ht(1,arguments);var e=dt(t);return!isNaN(e)}var pt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function mt(t,e,r){var n;return r=r||{},n="string"==typeof pt[t]?pt[t]:1===e?pt[t].one:pt[t].other.replace("{{count}}",e),r.addSuffix?r.comparison>0?"in "+n:n+" ago":n}function wt(t){return function(e){var r=e||{},n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}var bt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xt={date:wt({formats:bt,defaultWidth:"full"}),time:wt({formats:yt,defaultWidth:"full"}),dateTime:wt({formats:vt,defaultWidth:"full"})},Tt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Ct(t,e,r,n){return Tt[t]}function kt(t){return function(e,r){var n,i=r||{};if("formatting"===(i.context?String(i.context):"standalone")&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,s=i.width?String(i.width):a;n=t.formattingValues[s]||t.formattingValues[a]}else{var o=t.defaultWidth,u=i.width?String(i.width):t.defaultWidth;n=t.values[u]||t.values[o]}return n[t.argumentCallback?t.argumentCallback(e):e]}}var Dt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},At={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Et={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$t={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ut={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function St(t,e){var r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"}var Pt={ordinalNumber:St,era:kt({values:Dt,defaultWidth:"wide"}),quarter:kt({values:At,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:kt({values:Et,defaultWidth:"wide"}),day:kt({values:$t,defaultWidth:"wide"}),dayPeriod:kt({values:Mt,defaultWidth:"wide",formattingValues:Ut,defaultFormattingWidth:"wide"})};function Rt(t){return function(e,r){var n=String(e),i=r||{},a=n.match(t.matchPattern);if(!a)return null;var s=a[0],o=n.match(t.parsePattern);if(!o)return null;var u=t.valueCallback?t.valueCallback(o[0]):o[0];return{value:u=i.valueCallback?i.valueCallback(u):u,rest:n.slice(s.length)}}}function Ot(t){return function(e,r){var n=String(e),i=r||{},a=i.width,s=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],o=n.match(s);if(!o)return null;var u,c=o[0],h=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(h)?Nt(h,(function(t){return t.test(c)})):qt(h,(function(t){return t.test(c)})),u=t.valueCallback?t.valueCallback(u):u,{value:u=i.valueCallback?i.valueCallback(u):u,rest:n.slice(c.length)}}}function qt(t,e){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r]))return r}function Nt(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r}var Yt=/^(\d+)(th|st|nd|rd)?/i,Lt=/\d+/i,jt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ht={any:[/^b/i,/^(a|c)/i]},Ft={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Wt={any:[/1/i,/2/i,/3/i,/4/i]},zt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Bt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},It={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Xt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_t={ordinalNumber:Rt({matchPattern:Yt,parsePattern:Lt,valueCallback:function(t){return parseInt(t,10)}}),era:Ot({matchPatterns:jt,defaultMatchWidth:"wide",parsePatterns:Ht,defaultParseWidth:"any"}),quarter:Ot({matchPatterns:Ft,defaultMatchWidth:"wide",parsePatterns:Wt,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ot({matchPatterns:zt,defaultMatchWidth:"wide",parsePatterns:Qt,defaultParseWidth:"any"}),day:Ot({matchPatterns:Bt,defaultMatchWidth:"wide",parsePatterns:It,defaultParseWidth:"any"}),dayPeriod:Ot({matchPatterns:Gt,defaultMatchWidth:"any",parsePatterns:Xt,defaultParseWidth:"any"})},Jt={code:"en-US",formatDistance:mt,formatLong:xt,formatRelative:Ct,localize:Pt,match:_t,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Kt(t,e){ht(2,arguments);var r=ct(e);return lt(t,-r)}function Zt(t,e){for(var r=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return r+n}var Vt={y:function(t,e){var r=t.getUTCFullYear(),n=r>0?r:1-r;return Zt("yy"===e?n%100:n,e.length)},M:function(t,e){var r=t.getUTCMonth();return"M"===e?String(r+1):Zt(r+1,2)},d:function(t,e){return Zt(t.getUTCDate(),e.length)},a:function(t,e){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return"am"===r?"a.m.":"p.m."}},h:function(t,e){return Zt(t.getUTCHours()%12||12,e.length)},H:function(t,e){return Zt(t.getUTCHours(),e.length)},m:function(t,e){return Zt(t.getUTCMinutes(),e.length)},s:function(t,e){return Zt(t.getUTCSeconds(),e.length)},S:function(t,e){var r=e.length,n=t.getUTCMilliseconds();return Zt(Math.floor(n*Math.pow(10,r-3)),e.length)}},te=864e5;function ee(t){ht(1,arguments);var e=dt(t),r=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),i=r-n;return Math.floor(i/te)+1}function re(t){ht(1,arguments);var e=1,r=dt(t),n=r.getUTCDay(),i=(n<e?7:0)+n-e;return r.setUTCDate(r.getUTCDate()-i),r.setUTCHours(0,0,0,0),r}function ne(t){ht(1,arguments);var e=dt(t),r=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var i=re(n),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var s=re(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=s.getTime()?r:r-1}function ie(t){ht(1,arguments);var e=ne(t),r=new Date(0);r.setUTCFullYear(e,0,4),r.setUTCHours(0,0,0,0);var n=re(r);return n}var ae=6048e5;function se(t){ht(1,arguments);var e=dt(t),r=re(e).getTime()-ie(e).getTime();return Math.round(r/ae)+1}function oe(t,e){ht(1,arguments);var r=e||{},n=r.locale,i=n&&n.options&&n.options.weekStartsOn,a=null==i?0:ct(i),s=null==r.weekStartsOn?a:ct(r.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var o=dt(t),u=o.getUTCDay(),c=(u<s?7:0)+u-s;return o.setUTCDate(o.getUTCDate()-c),o.setUTCHours(0,0,0,0),o}function ue(t,e){ht(1,arguments);var r=dt(t,e),n=r.getUTCFullYear(),i=e||{},a=i.locale,s=a&&a.options&&a.options.firstWeekContainsDate,o=null==s?1:ct(s),u=null==i.firstWeekContainsDate?o:ct(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(n+1,0,u),c.setUTCHours(0,0,0,0);var h=oe(c,e),d=new Date(0);d.setUTCFullYear(n,0,u),d.setUTCHours(0,0,0,0);var l=oe(d,e);return r.getTime()>=h.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function ce(t,e){ht(1,arguments);var r=e||{},n=r.locale,i=n&&n.options&&n.options.firstWeekContainsDate,a=null==i?1:ct(i),s=null==r.firstWeekContainsDate?a:ct(r.firstWeekContainsDate),o=ue(t,e),u=new Date(0);u.setUTCFullYear(o,0,s),u.setUTCHours(0,0,0,0);var c=oe(u,e);return c}var he=6048e5;function de(t,e){ht(1,arguments);var r=dt(t),n=oe(r,e).getTime()-ce(r,e).getTime();return Math.round(n/he)+1}var le={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fe={G:function(t,e,r){var n=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if("yo"===e){var n=t.getUTCFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Vt.y(t,e)},Y:function(t,e,r,n){var i=ue(t,n),a=i>0?i:1-i;return"YY"===e?Zt(a%100,2):"Yo"===e?r.ordinalNumber(a,{unit:"year"}):Zt(a,e.length)},R:function(t,e){return Zt(ne(t),e.length)},u:function(t,e){return Zt(t.getUTCFullYear(),e.length)},Q:function(t,e,r){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Zt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Zt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){var n=t.getUTCMonth();switch(e){case"M":case"MM":return Vt.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){var n=t.getUTCMonth();switch(e){case"L":return String(n+1);case"LL":return Zt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){var i=de(t,n);return"wo"===e?r.ordinalNumber(i,{unit:"week"}):Zt(i,e.length)},I:function(t,e,r){var n=se(t);return"Io"===e?r.ordinalNumber(n,{unit:"week"}):Zt(n,e.length)},d:function(t,e,r){return"do"===e?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Vt.d(t,e)},D:function(t,e,r){var n=ee(t);return"Do"===e?r.ordinalNumber(n,{unit:"dayOfYear"}):Zt(n,e.length)},E:function(t,e,r){var n=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){var i=t.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Zt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){var i=t.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Zt(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){var n=t.getUTCDay(),i=0===n?7:n;switch(e){case"i":return String(i);case"ii":return Zt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,r){var n,i=t.getUTCHours();switch(n=12===i?le.noon:0===i?le.midnight:i/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,r){var n,i=t.getUTCHours();switch(n=i>=17?le.evening:i>=12?le.afternoon:i>=4?le.morning:le.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,r){if("ho"===e){var n=t.getUTCHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Vt.h(t,e)},H:function(t,e,r){return"Ho"===e?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Vt.H(t,e)},K:function(t,e,r){var n=t.getUTCHours()%12;return"Ko"===e?r.ordinalNumber(n,{unit:"hour"}):Zt(n,e.length)},k:function(t,e,r){var n=t.getUTCHours();return 0===n&&(n=24),"ko"===e?r.ordinalNumber(n,{unit:"hour"}):Zt(n,e.length)},m:function(t,e,r){return"mo"===e?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Vt.m(t,e)},s:function(t,e,r){return"so"===e?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Vt.s(t,e)},S:function(t,e){return Vt.S(t,e)},X:function(t,e,r,n){var i=(n._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return pe(i);case"XXXX":case"XX":return me(i);case"XXXXX":case"XXX":default:return me(i,":")}},x:function(t,e,r,n){var i=(n._originalDate||t).getTimezoneOffset();switch(e){case"x":return pe(i);case"xxxx":case"xx":return me(i);case"xxxxx":case"xxx":default:return me(i,":")}},O:function(t,e,r,n){var i=(n._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ge(i,":");case"OOOO":default:return"GMT"+me(i,":")}},z:function(t,e,r,n){var i=(n._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ge(i,":");case"zzzz":default:return"GMT"+me(i,":")}},t:function(t,e,r,n){var i=n._originalDate||t;return Zt(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,r,n){return Zt((n._originalDate||t).getTime(),e.length)}};function ge(t,e){var r=t>0?"-":"+",n=Math.abs(t),i=Math.floor(n/60),a=n%60;if(0===a)return r+String(i);var s=e||"";return r+String(i)+s+Zt(a,2)}function pe(t,e){return t%60==0?(t>0?"-":"+")+Zt(Math.abs(t)/60,2):me(t,e)}function me(t,e){var r=e||"",n=t>0?"-":"+",i=Math.abs(t);return n+Zt(Math.floor(i/60),2)+r+Zt(i%60,2)}function we(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function be(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}function ye(t,e){var r,n=t.match(/(P+)(p+)?/),i=n[1],a=n[2];if(!a)return we(t,e);switch(i){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"})}return r.replace("{{date}}",we(i,e)).replace("{{time}}",be(a,e))}var ve={p:be,P:ye},xe=["D","DD"],Te=["YY","YYYY"];function Ce(t){return-1!==xe.indexOf(t)}function ke(t){return-1!==Te.indexOf(t)}function De(t,e,r){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://git.io/fxCyr"))}var Ae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$e=/^'([^]*?)'?$/,Me=/''/g,Ue=/[a-zA-Z]/;function Se(t,e,r){ht(2,arguments);var n=String(e),i=r||{},a=i.locale||Jt,s=a.options&&a.options.firstWeekContainsDate,o=null==s?1:ct(s),u=null==i.firstWeekContainsDate?o:ct(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=a.options&&a.options.weekStartsOn,h=null==c?0:ct(c),d=null==i.weekStartsOn?h:ct(i.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var l=dt(t);if(!gt(l))throw new RangeError("Invalid time value");var f=ft(l),g=Kt(l,f),p={firstWeekContainsDate:u,weekStartsOn:d,locale:a,_originalDate:l},m=n.match(Ee).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,ve[e])(t,a.formatLong,p):t})).join("").match(Ae).map((function(r){if("''"===r)return"'";var n=r[0];if("'"===n)return Pe(r);var s=fe[n];if(s)return!i.useAdditionalWeekYearTokens&&ke(r)&&De(r,e,t),!i.useAdditionalDayOfYearTokens&&Ce(r)&&De(r,e,t),s(g,r,a.localize,p);if(n.match(Ue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");return r})).join("");return m}function Pe(t){return t.match($e)[1].replace(Me,"'")}function Re(t,e){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in e=e||{})e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Oe(t,e,r){ht(2,arguments);var n=r||{},i=n.locale,a=i&&i.options&&i.options.weekStartsOn,s=null==a?0:ct(a),o=null==n.weekStartsOn?s:ct(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=dt(t),c=ct(e),h=u.getUTCDay(),d=c%7,l=(d+7)%7,f=(l<o?7:0)+c-h;return u.setUTCDate(u.getUTCDate()+f),u}function qe(t,e){ht(2,arguments);var r=ct(e);r%7==0&&(r-=7);var n=1,i=dt(t),a=i.getUTCDay(),s=r%7,o=(s+7)%7,u=(o<n?7:0)+r-a;return i.setUTCDate(i.getUTCDate()+u),i}function Ne(t,e){ht(2,arguments);var r=dt(t),n=ct(e),i=se(r)-n;return r.setUTCDate(r.getUTCDate()-7*i),r}function Ye(t,e,r){ht(2,arguments);var n=dt(t),i=ct(e),a=de(n,r)-i;return n.setUTCDate(n.getUTCDate()-7*a),n}var Le=36e5,je=6e4,He=1e3,Fe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},We={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ze(t,e,r){var n=e.match(t);if(!n)return null;var i=parseInt(n[0],10);return{value:r?r(i):i,rest:e.slice(n[0].length)}}function Qe(t,e){var r=e.match(t);if(!r)return null;if("Z"===r[0])return{value:0,rest:e.slice(1)};var n="+"===r[1]?1:-1,i=r[2]?parseInt(r[2],10):0,a=r[3]?parseInt(r[3],10):0,s=r[5]?parseInt(r[5],10):0;return{value:n*(i*Le+a*je+s*He),rest:e.slice(r[0].length)}}function Be(t,e){return ze(Fe.anyDigitsSigned,t,e)}function Ie(t,e,r){switch(t){case 1:return ze(Fe.singleDigit,e,r);case 2:return ze(Fe.twoDigits,e,r);case 3:return ze(Fe.threeDigits,e,r);case 4:return ze(Fe.fourDigits,e,r);default:return ze(new RegExp("^\\d{1,"+t+"}"),e,r)}}function Ge(t,e,r){switch(t){case 1:return ze(Fe.singleDigitSigned,e,r);case 2:return ze(Fe.twoDigitsSigned,e,r);case 3:return ze(Fe.threeDigitsSigned,e,r);case 4:return ze(Fe.fourDigitsSigned,e,r);default:return ze(new RegExp("^-?\\d{1,"+t+"}"),e,r)}}function Xe(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function _e(t,e){var r,n=e>0,i=n?e:1-e;if(i<=50)r=t||100;else{var a=i+50;r=t+100*Math.floor(a/100)-(t>=a%100?100:0)}return n?r:1-r}var Je=[31,28,31,30,31,30,31,31,30,31,30,31],Ke=[31,29,31,30,31,30,31,31,30,31,30,31];function Ze(t){return t%400==0||t%4==0&&t%100!=0}var Ve={G:{priority:140,parse:function(t,e,r,n){switch(e){case"G":case"GG":case"GGG":return r.era(t,{width:"abbreviated"})||r.era(t,{width:"narrow"});case"GGGGG":return r.era(t,{width:"narrow"});case"GGGG":default:return r.era(t,{width:"wide"})||r.era(t,{width:"abbreviated"})||r.era(t,{width:"narrow"})}},set:function(t,e,r,n){return e.era=r,t.setUTCFullYear(r,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(t,e,r,n){var i=function(t){return{year:t,isTwoDigitYear:"yy"===e}};switch(e){case"y":return Ie(4,t,i);case"yo":return r.ordinalNumber(t,{unit:"year",valueCallback:i});default:return Ie(e.length,t,i)}},validate:function(t,e,r){return e.isTwoDigitYear||e.year>0},set:function(t,e,r,n){var i=t.getUTCFullYear();if(r.isTwoDigitYear){var a=_e(r.year,i);return t.setUTCFullYear(a,0,1),t.setUTCHours(0,0,0,0),t}var s="era"in e&&1!==e.era?1-r.year:r.year;return t.setUTCFullYear(s,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(t,e,r,n){var i=function(t){return{year:t,isTwoDigitYear:"YY"===e}};switch(e){case"Y":return Ie(4,t,i);case"Yo":return r.ordinalNumber(t,{unit:"year",valueCallback:i});default:return Ie(e.length,t,i)}},validate:function(t,e,r){return e.isTwoDigitYear||e.year>0},set:function(t,e,r,n){var i=ue(t,n);if(r.isTwoDigitYear){var a=_e(r.year,i);return t.setUTCFullYear(a,0,n.firstWeekContainsDate),t.setUTCHours(0,0,0,0),oe(t,n)}var s="era"in e&&1!==e.era?1-r.year:r.year;return t.setUTCFullYear(s,0,n.firstWeekContainsDate),t.setUTCHours(0,0,0,0),oe(t,n)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(t,e,r,n){return Ge("R"===e?4:e.length,t)},set:function(t,e,r,n){var i=new Date(0);return i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0),re(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(t,e,r,n){return Ge("u"===e?4:e.length,t)},set:function(t,e,r,n){return t.setUTCFullYear(r,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(t,e,r,n){switch(e){case"Q":case"QQ":return Ie(e.length,t);case"Qo":return r.ordinalNumber(t,{unit:"quarter"});case"QQQ":return r.quarter(t,{width:"abbreviated",context:"formatting"})||r.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(t,{width:"wide",context:"formatting"})||r.quarter(t,{width:"abbreviated",context:"formatting"})||r.quarter(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,r){return e>=1&&e<=4},set:function(t,e,r,n){return t.setUTCMonth(3*(r-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(t,e,r,n){switch(e){case"q":case"qq":return Ie(e.length,t);case"qo":return r.ordinalNumber(t,{unit:"quarter"});case"qqq":return r.quarter(t,{width:"abbreviated",context:"standalone"})||r.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(t,{width:"wide",context:"standalone"})||r.quarter(t,{width:"abbreviated",context:"standalone"})||r.quarter(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,r){return e>=1&&e<=4},set:function(t,e,r,n){return t.setUTCMonth(3*(r-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(t,e,r,n){var i=function(t){return t-1};switch(e){case"M":return ze(Fe.month,t,i);case"MM":return Ie(2,t,i);case"Mo":return r.ordinalNumber(t,{unit:"month",valueCallback:i});case"MMM":return r.month(t,{width:"abbreviated",context:"formatting"})||r.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(t,{width:"wide",context:"formatting"})||r.month(t,{width:"abbreviated",context:"formatting"})||r.month(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,r){return e>=0&&e<=11},set:function(t,e,r,n){return t.setUTCMonth(r,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(t,e,r,n){var i=function(t){return t-1};switch(e){case"L":return ze(Fe.month,t,i);case"LL":return Ie(2,t,i);case"Lo":return r.ordinalNumber(t,{unit:"month",valueCallback:i});case"LLL":return r.month(t,{width:"abbreviated",context:"standalone"})||r.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(t,{width:"wide",context:"standalone"})||r.month(t,{width:"abbreviated",context:"standalone"})||r.month(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,r){return e>=0&&e<=11},set:function(t,e,r,n){return t.setUTCMonth(r,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(t,e,r,n){switch(e){case"w":return ze(Fe.week,t);case"wo":return r.ordinalNumber(t,{unit:"week"});default:return Ie(e.length,t)}},validate:function(t,e,r){return e>=1&&e<=53},set:function(t,e,r,n){return oe(Ye(t,r,n),n)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(t,e,r,n){switch(e){case"I":return ze(Fe.week,t);case"Io":return r.ordinalNumber(t,{unit:"week"});default:return Ie(e.length,t)}},validate:function(t,e,r){return e>=1&&e<=53},set:function(t,e,r,n){return re(Ne(t,r,n),n)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(t,e,r,n){switch(e){case"d":return ze(Fe.date,t);case"do":return r.ordinalNumber(t,{unit:"date"});default:return Ie(e.length,t)}},validate:function(t,e,r){var n=Ze(t.getUTCFullYear()),i=t.getUTCMonth();return n?e>=1&&e<=Ke[i]:e>=1&&e<=Je[i]},set:function(t,e,r,n){return t.setUTCDate(r),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(t,e,r,n){switch(e){case"D":case"DD":return ze(Fe.dayOfYear,t);case"Do":return r.ordinalNumber(t,{unit:"date"});default:return Ie(e.length,t)}},validate:function(t,e,r){return Ze(t.getUTCFullYear())?e>=1&&e<=366:e>=1&&e<=365},set:function(t,e,r,n){return t.setUTCMonth(0,r),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(t,e,r,n){switch(e){case"E":case"EE":case"EEE":return r.day(t,{width:"abbreviated",context:"formatting"})||r.day(t,{width:"short",context:"formatting"})||r.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(t,{width:"short",context:"formatting"})||r.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(t,{width:"wide",context:"formatting"})||r.day(t,{width:"abbreviated",context:"formatting"})||r.day(t,{width:"short",context:"formatting"})||r.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,r){return e>=0&&e<=6},set:function(t,e,r,n){return(t=Oe(t,r,n)).setUTCHours(0,0,0,0),t},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(t,e,r,n){var i=function(t){var e=7*Math.floor((t-1)/7);return(t+n.weekStartsOn+6)%7+e};switch(e){case"e":case"ee":return Ie(e.length,t,i);case"eo":return r.ordinalNumber(t,{unit:"day",valueCallback:i});case"eee":return r.day(t,{width:"abbreviated",context:"formatting"})||r.day(t,{width:"short",context:"formatting"})||r.day(t,{width:"narrow",context:"formatting"});case"eeeee":return r.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(t,{width:"short",context:"formatting"})||r.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(t,{width:"wide",context:"formatting"})||r.day(t,{width:"abbreviated",context:"formatting"})||r.day(t,{width:"short",context:"formatting"})||r.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,r){return e>=0&&e<=6},set:function(t,e,r,n){return(t=Oe(t,r,n)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(t,e,r,n){var i=function(t){var e=7*Math.floor((t-1)/7);return(t+n.weekStartsOn+6)%7+e};switch(e){case"c":case"cc":return Ie(e.length,t,i);case"co":return r.ordinalNumber(t,{unit:"day",valueCallback:i});case"ccc":return r.day(t,{width:"abbreviated",context:"standalone"})||r.day(t,{width:"short",context:"standalone"})||r.day(t,{width:"narrow",context:"standalone"});case"ccccc":return r.day(t,{width:"narrow",context:"standalone"});case"cccccc":return r.day(t,{width:"short",context:"standalone"})||r.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(t,{width:"wide",context:"standalone"})||r.day(t,{width:"abbreviated",context:"standalone"})||r.day(t,{width:"short",context:"standalone"})||r.day(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,r){return e>=0&&e<=6},set:function(t,e,r,n){return(t=Oe(t,r,n)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(t,e,r,n){var i=function(t){return 0===t?7:t};switch(e){case"i":case"ii":return Ie(e.length,t);case"io":return r.ordinalNumber(t,{unit:"day"});case"iii":return r.day(t,{width:"abbreviated",context:"formatting",valueCallback:i})||r.day(t,{width:"short",context:"formatting",valueCallback:i})||r.day(t,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return r.day(t,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return r.day(t,{width:"short",context:"formatting",valueCallback:i})||r.day(t,{width:"narrow",context:"formatting",valueCallback:i});case"iiii":default:return r.day(t,{width:"wide",context:"formatting",valueCallback:i})||r.day(t,{width:"abbreviated",context:"formatting",valueCallback:i})||r.day(t,{width:"short",context:"formatting",valueCallback:i})||r.day(t,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(t,e,r){return e>=1&&e<=7},set:function(t,e,r,n){return(t=qe(t,r,n)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(t,e,r,n){switch(e){case"a":case"aa":case"aaa":return r.dayPeriod(t,{width:"abbreviated",context:"formatting"})||r.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(t,{width:"wide",context:"formatting"})||r.dayPeriod(t,{width:"abbreviated",context:"formatting"})||r.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,r,n){return t.setUTCHours(Xe(r),0,0,0),t},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(t,e,r,n){switch(e){case"b":case"bb":case"bbb":return r.dayPeriod(t,{width:"abbreviated",context:"formatting"})||r.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(t,{width:"wide",context:"formatting"})||r.dayPeriod(t,{width:"abbreviated",context:"formatting"})||r.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,r,n){return t.setUTCHours(Xe(r),0,0,0),t},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(t,e,r,n){switch(e){case"B":case"BB":case"BBB":return r.dayPeriod(t,{width:"abbreviated",context:"formatting"})||r.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(t,{width:"wide",context:"formatting"})||r.dayPeriod(t,{width:"abbreviated",context:"formatting"})||r.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,r,n){return t.setUTCHours(Xe(r),0,0,0),t},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(t,e,r,n){switch(e){case"h":return ze(Fe.hour12h,t);case"ho":return r.ordinalNumber(t,{unit:"hour"});default:return Ie(e.length,t)}},validate:function(t,e,r){return e>=1&&e<=12},set:function(t,e,r,n){var i=t.getUTCHours()>=12;return i&&r<12?t.setUTCHours(r+12,0,0,0):i||12!==r?t.setUTCHours(r,0,0,0):t.setUTCHours(0,0,0,0),t},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(t,e,r,n){switch(e){case"H":return ze(Fe.hour23h,t);case"Ho":return r.ordinalNumber(t,{unit:"hour"});default:return Ie(e.length,t)}},validate:function(t,e,r){return e>=0&&e<=23},set:function(t,e,r,n){return t.setUTCHours(r,0,0,0),t},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(t,e,r,n){switch(e){case"K":return ze(Fe.hour11h,t);case"Ko":return r.ordinalNumber(t,{unit:"hour"});default:return Ie(e.length,t)}},validate:function(t,e,r){return e>=0&&e<=11},set:function(t,e,r,n){return t.getUTCHours()>=12&&r<12?t.setUTCHours(r+12,0,0,0):t.setUTCHours(r,0,0,0),t},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(t,e,r,n){switch(e){case"k":return ze(Fe.hour24h,t);case"ko":return r.ordinalNumber(t,{unit:"hour"});default:return Ie(e.length,t)}},validate:function(t,e,r){return e>=1&&e<=24},set:function(t,e,r,n){var i=r<=24?r%24:r;return t.setUTCHours(i,0,0,0),t},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(t,e,r,n){switch(e){case"m":return ze(Fe.minute,t);case"mo":return r.ordinalNumber(t,{unit:"minute"});default:return Ie(e.length,t)}},validate:function(t,e,r){return e>=0&&e<=59},set:function(t,e,r,n){return t.setUTCMinutes(r,0,0),t},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(t,e,r,n){switch(e){case"s":return ze(Fe.second,t);case"so":return r.ordinalNumber(t,{unit:"second"});default:return Ie(e.length,t)}},validate:function(t,e,r){return e>=0&&e<=59},set:function(t,e,r,n){return t.setUTCSeconds(r,0),t},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(t,e,r,n){return Ie(e.length,t,(function(t){return Math.floor(t*Math.pow(10,3-e.length))}))},set:function(t,e,r,n){return t.setUTCMilliseconds(r),t},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(t,e,r,n){switch(e){case"X":return Qe(We.basicOptionalMinutes,t);case"XX":return Qe(We.basic,t);case"XXXX":return Qe(We.basicOptionalSeconds,t);case"XXXXX":return Qe(We.extendedOptionalSeconds,t);case"XXX":default:return Qe(We.extended,t)}},set:function(t,e,r,n){return e.timestampIsSet?t:new Date(t.getTime()-r)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(t,e,r,n){switch(e){case"x":return Qe(We.basicOptionalMinutes,t);case"xx":return Qe(We.basic,t);case"xxxx":return Qe(We.basicOptionalSeconds,t);case"xxxxx":return Qe(We.extendedOptionalSeconds,t);case"xxx":default:return Qe(We.extended,t)}},set:function(t,e,r,n){return e.timestampIsSet?t:new Date(t.getTime()-r)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(t,e,r,n){return Be(t)},set:function(t,e,r,n){return[new Date(1e3*r),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(t,e,r,n){return Be(t)},set:function(t,e,r,n){return[new Date(r),{timestampIsSet:!0}]},incompatibleTokens:"*"}},tr=10,er=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nr=/^'([^]*?)'?$/,ir=/''/g,ar=/\S/,sr=/[a-zA-Z]/;function or(t,e,r,n){ht(3,arguments);var i=String(t),a=String(e),s=n||{},o=s.locale||Jt;if(!o.match)throw new RangeError("locale must contain match property");var u=o.options&&o.options.firstWeekContainsDate,c=null==u?1:ct(u),h=null==s.firstWeekContainsDate?c:ct(s.firstWeekContainsDate);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=o.options&&o.options.weekStartsOn,l=null==d?0:ct(d),f=null==s.weekStartsOn?l:ct(s.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===a)return""===i?dt(r):new Date(NaN);var g,p={firstWeekContainsDate:h,weekStartsOn:f,locale:o},m=[{priority:tr,subPriority:-1,set:ur,index:0}],w=a.match(rr).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,ve[e])(t,o.formatLong,p):t})).join("").match(er),b=[];for(g=0;g<w.length;g++){var y=w[g];!s.useAdditionalWeekYearTokens&&ke(y)&&De(y,a,t),!s.useAdditionalDayOfYearTokens&&Ce(y)&&De(y,a,t);var v=y[0],x=Ve[v];if(x){var T=x.incompatibleTokens;if(Array.isArray(T)){for(var C=void 0,k=0;k<b.length;k++){var D=b[k].token;if(-1!==T.indexOf(D)||D===v){C=b[k];break}}if(C)throw new RangeError("The format string mustn't contain `".concat(C.fullToken,"` and `").concat(y,"` at the same time"))}else if("*"===x.incompatibleTokens&&b.length)throw new RangeError("The format string mustn't contain `".concat(y,"` and any other token at the same time"));b.push({token:v,fullToken:y});var A=x.parse(i,y,o.match,p);if(!A)return new Date(NaN);m.push({priority:x.priority,subPriority:x.subPriority||0,set:x.set,validate:x.validate,value:A.value,index:m.length}),i=A.rest}else{if(v.match(sr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");if("''"===y?y="'":"'"===v&&(y=cr(y)),0!==i.indexOf(y))return new Date(NaN);i=i.slice(y.length)}}if(i.length>0&&ar.test(i))return new Date(NaN);var E=m.map((function(t){return t.priority})).sort((function(t,e){return e-t})).filter((function(t,e,r){return r.indexOf(t)===e})).map((function(t){return m.filter((function(e){return e.priority===t})).sort((function(t,e){return e.subPriority-t.subPriority}))})).map((function(t){return t[0]})),$=dt(r);if(isNaN($))return new Date(NaN);var M=Kt($,ft($)),U={};for(g=0;g<E.length;g++){var S=E[g];if(S.validate&&!S.validate(M,S.value,p))return new Date(NaN);var P=S.set(M,U,S.value,p);P[0]?(M=P[0],Re(U,P[1])):M=P}return M}function ur(t,e){if(e.timestampIsSet)return t;var r=new Date(0);return r.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),r.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),r}function cr(t){return t.match(nr)[1].replace(ir,"'")}class hr extends V{constructor(t={},e,r={}){super(t,e,"store-hour",r)}get day(){return this.getAttribute("day")}get startDateInstance(){if(!this.hasAttribute("start"))return null;const t=3===this.getAttribute("start").split(":").length?"k:mm:ss":"k:mm";return or(this.getAttribute("start"),t,new Date)}get endDateInstance(){if(!this.hasAttribute("end"))return null;const t=3===this.getAttribute("end").split(":").length?"k:mm:ss":"k:mm";return or(this.getAttribute("end"),t,new Date)}get humanReadableHours(){return gt(this.startDateInstance)&&gt(this.endDateInstance)?`${Se(this.startDateInstance,"p")} - ${Se(this.endDateInstance,"p")}`:`${this.start} - ${this.end}`}create(){throw new Error("There is no create() method store location!")}update(){throw new Error("There is no update() method store location!")}destroy(){throw new Error("There is no destroy() method store location!")}reload(){throw new Error("There is no reload() method store location!")}}class dr extends V{constructor(t={},e,r={}){super(t,e,"store-location",r)}get hours(){return new y(this.getAttribute("hours").map((t=>new hr(t))))}get schedule(){const t={},e=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];for(let r=0;r<e.length;r++){t[e[r]]=new y}for(let e=0;e<this.hours.length;e++){const r=this.hours.objectAt(e);t[r.day].pushObject(r)}return t}create(){throw new Error("There is no create() method store location!")}update(){throw new Error("There is no update() method store location!")}destroy(){throw new Error("There is no destroy() method store location!")}reload(){throw new Error("There is no reload() method store location!")}}class lr extends V{constructor(t={},e,r={}){super(t,e,"store",r)}getLocations(){return this.adapter.get("locations").then((t=>new y(t.map((t=>(t.place&&(t.place=new q(t.place)),new dr(t,this.adapter)))))))}}const{isArray:fr}=Array;class gr extends Y{constructor(t={},e,r={}){if(t instanceof L)return super({},t,"service-quote",r);super(t,e,"service-quote",r)}setAdapter(t){return this.adapter=t,this.store=new xr(this.resource,t,{onAfterFetch:this.syncAttributes.bind(this),actions:this.options?.actions}),this}get formattedAmount(){const{amount:t,currency:e}=this.getAttributes(["amount","currency"]);return t&&e?rt(t/100,e):null}static getFromCart(t,...e){return new gr(t).fromCart(...e)}fromCart(t,e,r,n="storefront",i=!1){return(t instanceof dr||t instanceof q)&&(t=t.id),(e instanceof dr||e instanceof q)&&(e=e.id),r instanceof ut&&(r=r.id),this.adapter.get("service-quotes/from-cart",{origin:t,destination:e,cart:r,config:n,all:i}).then((t=>fr(t)?new y(t.map((t=>new gr(t,this.adapter)))):new gr(t,this.adapter)))}}const pr=new U({create:void 0,findAll:void 0,query:void 0,queryRecord:void 0,initialize:function(t,e,r,n,i={}){return T(t)&&(t=t.id),T(e)&&(e=e.id),T(r)&&(r=r.id),this.adapter.get(`${this.namespace}/before`,{customer:t,cart:e,serviceQuote:r,gateway:n},i)},captureOrder:function(t,e={},r={}){return this.adapter.get(`${this.namespace}/capture`,{token:t,transactionDetails:e},r).then((t=>new R(t)))}});class mr extends V{constructor(t={},e,r={}){super(t,e,"cart",r)}initialize(){return this.store.initialize(...arguments)}captureOrder(){return this.store.captureOrder(...arguments)}}const wr={Product:nt,Category:it,Customer:st,Cart:ut,DeliveryServiceQuote:gr,Store:lr,StoreLocation:dr,StoreHour:hr,Checkout:mr},br={BrowserAdapter:j,NodeAdapter:H};class yr{constructor(){return this.resources=wr,this.adapters=br,this.lookup(...arguments)}lookup(t,e){const r=z(t),n=[...arguments].slice(2);if(!this[r])throw new Error("Attempted to resolve invalid type");if(!this[r][e])throw new Error(`No ${Q(t)} named ${e} to resolve`);return new this[r][e](...n)}}const vr=function(){return new yr(...arguments)};class xr extends Z{constructor(){super(...arguments)}extendActions(t=[]){return J(this,t)}serialize(t){return vr("resource",B(this.resource),t,this.adapter)}}class Tr{constructor(t,e={},r=!1){if(this.version=e.version||"v1",this.options={version:this.version,host:e.host||"https://api.fleetbase.io",namespace:`storefront/${this.version}`||e.namespace,publicKey:t,debug:r},"string"!=typeof t||0===t.length||!t.startsWith("store_"))throw new Error(" Invalid storefront key given to Storefront SDK");this.adapter=e.adapter||tt(this.options),this.products=new xr("product",this.adapter),this.categories=new xr("category",this.adapter),this.customers=new xr("customer",this.adapter).extendActions(at),this.cart=new xr("cart",this.adapter).extendActions(ot),this.checkout=new xr("checkout",this.adapter).extendActions(pr)}about(){return this.adapter.get("about")}search(t){return this.adapter.get("search",{query:t}).then((t=>new y(t.map((t=>new nt(t))))))}static newInstance(){return new Tr(...arguments)}setAdapter(t){this.adapter=t}getAdapter(){return this.adapter}}t.Cart=ut,t.Category=it,t.Checkout=mr,t.Customer=st,t.DeliveryServiceQuote=gr,t.Product=nt,t.Store=lr,t.StoreHour=hr,t.StoreLocation=dr,t.default=Tr,Object.defineProperty(t,"__esModule",{value:!0})}));
